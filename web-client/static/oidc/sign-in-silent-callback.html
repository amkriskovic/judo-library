<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Authenticating...</title>
</head>
<body>


<script src="/oidc/oidc-client.min.js"></script>
<script>
  // Callback for <iframe> (hidden) => /connect/checksession =>> that's how refresh token happens on the browser side
  // Spawn an <iframe>, then <iframe> visits IS4 because the cookie is in the browser so it's able to authenticate with auth endpoint
  // /connect/authorize and pertain new codes

  // * <iframe> takes care of refreshing our access_tokens => it does it on 1st load

  // Notify the parent window of response from the authorization endpoint

  // This prevents redirecting back to our nuxt App -> preventing loading inside <iframe>
  // * Page where <iframe> will land on, and have correct callback, it will rise correct events in our auth plugin

  // * We want to get the user only once the session check is completed
  console.log('signinSilentCallback called: ')
  new Oidc.UserManager({}).signinSilentCallback()
</script>
</body>
</html>
